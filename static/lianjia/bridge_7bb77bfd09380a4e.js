(function(f){var c={};var i=function(k){return c[k];};var r=function(k){if(!c[k]){var m={exports:{}};try{f[k].call(m.exports,m,m.exports,r,i)}catch(e){};c[k]=m.exports;}return c[k];};return r('a');})({a:function(e,t,n,r){var i=navigator.userAgent,s=/Link/img.test(i),o=/Alliance/img.test(i),u=/lianjiabaichuan/img.test(i),a=/lianjiabeike/img.test(i),f=/lianjiaatom/img.test(i),l=!s&&!o&&!u&&!a&&!f&&/Lianjia/img.test(i),c=l||s||o||u||a||f,h,p={isLianjiaApp:l,isLinkApp:s,isDeyou:o,isBaichuan:u,isBeike:a,isAtom:f,isApp:c,iswk:h};if(/Auth/img.test(i)){var d=document.createElement("script");d.src="https://s1.ljcdn.com/m-base/release/v04.2/asset/newBridge.js",document.head.appendChild(d),window.callbacks=[],window.$ljBridge={ready:function(e,t){window.callbacks.push(arguments.length>1?{fn:e,context:t}:{fn:e})},webStatus:p}}else{var v="HybridBridgeLJ",m=window.cookieSetting||{},g=window.tokenKey||m.tokenKey||"lianjia_token",y=m.ssidKey||"lianjia_ssid",b=m.uuidKey||"lianjia_uuid",w=m.udidKey||"lianjia_udid",E=m.cityKey||"select_city",S=m.cookieDomain||"lianjia.com",x,T,N=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){setTimeout(e,16)};function C(e,t){var n;t=t.split(".");while(n=t.shift())if((e=e[n])===undefined)return null;return e}function k(e){try{var t=e();return t||!0}catch(n){return!1}}function L(e){return/Android/i.test(navigator.userAgent)||(e=JSON.parse(e)),e}function A(e){e=e||{};var t={};return t.getStaticData=function(){return C(e,"staticData")},t.getDeviceId=function(){return C(e,"staticData.deviceId")},t.getAppVersion=function(){return C(e,"staticData.appVersion")},t.getNetwork=function(){return C(e,"staticData.network")},t.getScheme=function(){return C(e,"staticData.scheme")},t.getAccessToken=function(){return C(e,"staticData.accessToken")},t.getUserInfo=function(){return C(e,"staticData.userInfo")},t.getExtraData=function(){return C(e,"staticData.extraData")},t.getDeviceInfo=function(){return C(e,"staticData.deviceInfo")||C(e,"staticData.mDeviceInfo")},t.setPageTitle=function(t){return k(function(){e.setPageTitle(t)})},t.actionLogin=function(n){return k(function(){if(e.actionLogin)e.actionLogin(n);else{var r=t.getSchemeLink("actionlogin?param="+encodeURIComponent(n));t.actionWithUrl(r)}})},t.actionWithUrl=function(t){return k(function(){e.actionWithUrl(t)})},t.setRightButton=function(t){if((typeof t).toLowerCase()!="string")throw"params must be string";return t=L(t),k(function(){e.setRightButton(t)})},t.setRightButton2=function(t){if((typeof t).toLowerCase()!="string")throw"params must be string";return k(function(){e.setRightButton2(t)})},t.callAndBack=function(t){return k(function(){e.callAndBack(t)})},t.onPageChange=function(t){return k(function(){e.onPageChange(t)})},t.setCity=function(t){return k(function(){e.setCity(t)})},t.setShareConfig=function(n){if((typeof n).toLowerCase()!="string")throw"params must be string";n=JSON.parse(n);var r=t.getUserInfo(),i=r&&r.userId;return i&&s&&n.requestUrl&&!/\bagentid=([\w-\|]+)/i.test(n.requestUrl)&&(n.requestUrl+=(n.requestUrl.indexOf("?")<0?"?":"&")+"agentid="+i),/Android/i.test(navigator.userAgent)&&(n=JSON.stringify(n)),k(function(){e.setShareConfig(n)})},t.setShareConfigWithString=function(n){var r=JSON.parse(n),i=t.getUserInfo(),o=i&&i.userId;return o&&s&&r.requestUrl&&!/\bagentid=([\w-\|]+)/i.test(r.requestUrl)&&(r.requestUrl+=(r.requestUrl.indexOf("?")<0?"?":"&")+"agentid="+o),n=JSON.stringify(r),k(function(){e.setShareConfigWithString(n)})},t.actionShare=function(){return k(function(){e.actionShare()})},t.actionShareWithString=function(t){return k(function(){e.actionShareWithString(t)})},t.actionToast=function(t){return k(function(){e.actionToast(t)})},t.pageActionBar=function(t){return k(function(){e.pageActionBar(t)})},t.getSchemeLink=function(t,n){if(t&&(typeof t).toLowerCase()!="string")throw"url must be string";return e&&e.staticData&&e.staticData.scheme?(t=e.staticData.scheme+"://"+t,t):l?"lianjia://"+t:s?n?"lianjialinknh://"+t:"lianjialink://"+t:null},t.pageMethod=function(n,r){return k(function(){if(e["page"+n])/Android/i.test(navigator.userAgent)&&r instanceof Object&&(r=JSON.stringify(r)),e["page"+n](r);else{r=JSON.stringify(r);var i=t.getSchemeLink("page"+n.toLocaleLowerCase()+"?param="+encodeURIComponent(r));t.actionWithUrl(i)}})},t.saveData=function(n,r){var i={key:n,value:r};return k(function(){if(e.saveData)/Android/i.test(navigator.userAgent)&&(i=JSON.stringify(i)),e.saveData(i);else{i=JSON.stringify(i);var n=t.getSchemeLink("savedata?param="+encodeURIComponent(i));t.actionWithUrl(n)}})},t.closeWeb=function(t){return k(function(){e.closeWeb(t)})},t.exitThisPage=function(){return k(function(){e.exitThisPage()})},t.saveStrategyProgress=function(n){return k(function(){if(e.saveStrategyProgress)e.saveStrategyProgress(n);else{var r=t.getSchemeLink("savestrategyprogress?param="+n);t.actionWithUrl(r)}})},t.comment=function(n){return k(function(){if(e.comment)e.comment(n);else{var r=t.getSchemeLink("comment?param="+encodeURIComponent(n));t.actionWithUrl(r)}})},t.transData=function(n){return k(function(){if(e.transData)e.transData(n);else{var r=t.getSchemeLink("transdata?param="+encodeURIComponent(n));t.actionWithUrl(r)}})},t.copyString=function(n){return k(function(){if(e.copyString)e.copyString(n);else{var r=t.getSchemeLink("universalTool/copyString?string="+n);t.actionWithUrl(r)}})},t.changeTitleBarStyle=function(t){if(t!=0&&t!=1)throw"changeTitleBarStyle param must be 0 or 1";return k(function(){e.changeTitleBarStyle(t)})},t}function O(e){e=e||{};var t={};return t.getStaticData=function(){return C(e,"staticData")},t.getDeviceId=function(){return C(e,"staticData.deviceId")},t.getAppVersion=function(){return C(e,"staticData.appVersion")},t.getNetwork=function(){return C(e,"staticData.network")},t.getScheme=function(){return C(e,"staticData.scheme")},t.getAccessToken=function(){return C(e,"staticData.accessToken")},t.getUserInfo=function(){return C(e,"staticData.userInfo")},t.getExtraData=function(){return C(e,"staticData.extraData")},t.getDeviceInfo=function(){return C(e,"staticData.deviceInfo")||C(e,"staticData.mDeviceInfo")},t.setPageTitle=function(e){return k(function(){window.webkit.messageHandlers.lianjia.postMessage(JSON.stringify({type:"setTitle",param:e}))})},t.actionLogin=function(e){return k(function(){var n=t.getSchemeLink("actionlogin?param="+encodeURIComponent(e));t.actionWithUrl(n)})},t.actionWithUrl=function(e){return k(function(){window.webkit.messageHandlers.lianjia.postMessage(JSON.stringify({type:"actionWithUrl",param:e}))})},t.setRightButton=function(e){if((typeof e).toLowerCase()!="string")throw"params must be string";return e=L(e),k(function(){(typeof e).toLowerCase()=="string"&&(e=JSON.parse(e));var n;if(e.length==0||e[0]=="")n=[];else{e.length==1&&e[0]=="share"&&(T=!0);if(e.length!=1||e[0]!="share"||!x)throw"wkwebkit setRightButton just supports share and must after setShareConfig";var r=[];for(var i in x)x[i]instanceof String?r.push(i+"="+encodeURIComponent(x[i])):r.push(i+"="+encodeURIComponent(JSON.stringify(x[i])));r=r.join("&"),s?n=[{name:"分享",clickUrl:t.getSchemeLink("web/share?"+r)}]:n=[{name:"分享",clickUrl:t.getSchemeLink("share?"+r),imageUrl:"nav_btn_black_share_nor"}]}t.setRightButton2(JSON.stringify(n)),T=!1})},t.setRightButton2=function(e){if((typeof e).toLowerCase()!="string")throw"params must be string";return e.indexOf("[")!=0&&(e="["+e+"]"),k(function(){window.webkit.messageHandlers.lianjia.postMessage(JSON.stringify({type:"setRightButton",param:e}))})},t.callAndBack=function(e){return k(function(){window.webkit.messageHandlers.lianjia.postMessage(JSON.stringify({type:"callAndBack",param:e}))})},t.onPageChange=function(e){return k(function(){window.webkit.messageHandlers.lianjia.postMessage(JSON.stringify({type:"onPageChange",param:e}))})},t.setCity=function(e){return!1},t.setShareConfig=function(e){if((typeof e).toLowerCase()!="string")throw"params must be string";return t.setShareConfigWithString(e)},t.setShareConfigWithString=function(e){var n=JSON.parse(e),r=t.getUserInfo(),i=r&&r.userId;return i&&s&&n.requestUrl&&!/\bagentid=([\w-\|]+)/i.test(n.requestUrl)&&(n.requestUrl+=(n.requestUrl.indexOf("?")<0?"?":"&")+"agentid="+i),x=n,e=JSON.stringify(n),k(function(){window.webkit.messageHandlers.lianjia.postMessage(JSON.stringify({type:"setShareConfig",param:e})),T&&t.setRightButton('["share"]')})},t.actionShare=function(){return k(function(){if(!x)throw"must setShareConfig before";window.webkit.messageHandlers.lianjia.postMessage(JSON.stringify({type:"actionShare",param:JSON.stringify(x)}))})},t.actionShareWithString=function(e){return k(function(){window.webkit.messageHandlers.lianjia.postMessage(JSON.stringify({type:"actionShare",param:e}))})},t.actionToast=function(e){return!1},t.pageActionBar=function(e){return!1},t.getSchemeLink=function(t,n){if(t&&(typeof t).toLowerCase()!="string")throw"url must be string";return e&&e.staticData&&e.staticData.scheme?(t=e.staticData.scheme+"://"+t,t):l?"lianjia://"+t:s?n?"lianjialinknh://"+t:"lianjialink://"+t:null},t.pageMethod=function(e,n){return n=JSON.stringify(n),k(function(){var r=t.getSchemeLink("page"+e.toLocaleLowerCase()+"?param="+encodeURIComponent(n));t.actionWithUrl(r)})},t.saveData=function(e,n){var r={key:e,value:n};return r=JSON.stringify(r),k(function(){var e=t.getSchemeLink("savedata?param="+encodeURIComponent(r));t.actionWithUrl(e)})},t.closeWeb=function(e){return k(function(){window.webkit.messageHandlers.lianjia.postMessage(JSON.stringify({type:"closeWeb",param:e}))})},t.exitThisPage=function(){return!1},t.saveStrategyProgress=function(e){return k(function(){var n=t.getSchemeLink("savestrategyprogress?param="+e);t.actionWithUrl(n)})},t.comment=function(e){return k(function(){var n=JSON.parse(e),r=n.callback,i=t.getSchemeLink("comment?param="+encodeURIComponent(e)),s={actionUrl:i,functionName:r};t.callAndBack(JSON.stringify(s))})},t.transData=function(e){return!1},t.copyString=function(e){return k(function(){var n=t.getSchemeLink("universalTool/copyString?string="+e);t.actionWithUrl(n)})},t.changeTitleBarStyle=function(e){if(e!=0&&e!=1)throw"changeTitleBarStyle param must be 0 or 1";return k(function(){window.webkit.messageHandlers.lianjia.postMessage(JSON.stringify({type:"setFullScreen",param:e}))})},t}function M(e,t,n){var r=new Date;r.setDate(r.getDate()+n),document.cookie=e+"="+encodeURI(t)+(n==null?"":";path=/;domain="+S+";expires="+r.toUTCString())}function _(e){e=e.replace(/([\.\[\]\$])/g,"\\$1");var t=new RegExp("(^| )"+e+"=([^;]*)?;","ig"),n=document.cookie+";",r=t.exec(n),i=[];while(r)i.push(r[2]||""),r=t.exec(n);return i}function D(e){"console"in window&&console.log("%c$ljBridge log%c"+e,"font-size:12px;line-height:18px;background:#F5BD00;color:#FFF;border-radius:2px;padding:0 3px;margin-right:10px","")}var P=null,H=[];function B(){if(P===null)return;var e;while(e=H.shift()){var t=e.fn;try{"context"in e?t.call(e.context,P,p):t(P,p)}catch(n){"console"in window&&(console.error?console.error(n):console.log(n))}}}function j(e){return e&&e.tagName&&e.tagName.toLowerCase()==="a"?e:e&&e.parentNode?j(e.parentNode):!1}function F(e){var t=j(e.target),n=window.SysSchema;n||(l?n={tel:{match:/tel:(0[0-9]{2,3}\-)?(\d+)([\-,][0-9]{1,6})?/,schema:function(e){var t=(e[1]?e[1]:"")+e[2];return t=t.replace("-",""),t+=e[3]?e[3]:"","phonenum/customerservices?telephone="+t.replace("-","转").replace(",","转")}},sms:{match:/sms:(.*)/,schema:function(e){return"func/sendmessage?telephone="+e[1]}}}:s&&(n={tel:{match:/tel:(0[0-9]{2,3}\-)?(\d+)([\-,][0-9]{1,6})?/,schema:function(e){var t=(e[1]?e[1]:"")+e[2];return t=t.replace("-",""),t+=e[3]?e[3]:"","tel/tel?tel="+t}},sms:{match:/sms:(.*)/,schema:function(e){return"tel/message?tel="+e[1]}}}));if(t){var r=t.href;for(var i in n){var o=r.match(n[i].match);if(o&&o.length){var u=P.getSchemeLink(n[i].schema(o));return P.actionWithUrl(u),e.preventDefault(),!1}}}}window.$ljBridge={ready:function(e,t){H.push(arguments.length>1?{fn:e,context:t}:{fn:e}),N(B)},webStatus:p};if(c){var I=Date.now();(function q(){if(Date.now()-I>6e4){D("app detected, but bridge injection time out(60s).");return}var e=_("_staticData");e.length&&(window[v]={},p.iswk=h=1);if(window[v]===undefined)return N(q);var t=window[v];t._getStaticData?t.staticData=JSON.parse(t._getStaticData()):h&&(t.staticData=JSON.parse(decodeURIComponent(e[0]))),t.staticData.accessToken?M(g,t.staticData.accessToken,7):M(g,"",1);if(t.staticData.deviceInfo)M(y,t.staticData.deviceInfo.ssid,7),M(b,t.staticData.deviceInfo.uuid,7),M(w,t.staticData.deviceInfo.udid,7);else if(t.staticData.mDeviceInfo)M(y,t.staticData.mDeviceInfo.ssid,7),M(b,t.staticData.mDeviceInfo.uuid,7),M(w,t.staticData.mDeviceInfo.udid,7);else if(h){var n=_(b),r=_(y),i=_(w);M(y,r,7),M(b,n,7),M(w,i,7)}t.staticData.extraData&&t.staticData.extraData.cityId&&M(E,t.staticData.extraData.cityId,7),h?P=O(t):P=A(t),document.body.addEventListener("click",F),P.setPageTitle(""),P.setRightButton("[]"),P.setShareConfig("{}"),N(B),D("app detected, took "+Date.now()-I+"ms.")})()}else P=A({}),N(B),D("no app detected.")}}});